<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>燃气客户管理系统</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
  <!-- 地图资源 -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  
  <!-- Tailwind 配置 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#165DFF',
            secondary: '#0FC6C2',
            success: '#00B42A',
            warning: '#FF7D00',
            danger: '#F53F3F',
            dark: '#1D2129',
            'dark-2': '#4E5969',
            'light-1': '#F2F3F5',
            'light-2': '#E5E6EB',
            'light-3': '#C9CDD4'
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .sidebar-item {
        @apply flex items-center px-4 py-3 text-dark-2 hover:bg-primary/5 hover:text-primary transition-all duration-200 cursor-pointer;
      }
      .sidebar-item.active {
        @apply bg-primary/10 text-primary border-l-4 border-primary;
      }
      .card-shadow {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      }
      .table-row-hover {
        @apply hover:bg-light-1 transition-colors;
      }
      .btn-action {
        @apply p-1.5 text-dark-2 hover:text-primary transition-colors;
      }
      .scrollbar-thin {
        scrollbar-width: thin;
      }
      .scrollbar-thin::-webkit-scrollbar {
        width: 4px;
        height: 4px;
      }
      .scrollbar-thin::-webkit-scrollbar-thumb {
        background-color: rgba(156, 163, 175, 0.5);
        border-radius: 2px;
      }
    }
  </style>
</head>

<body class="font-inter bg-light-1 text-dark overflow-hidden h-screen flex flex-col">
  <!-- 顶部导航栏 -->
  <header class="bg-white shadow-sm h-16 flex items-center justify-between px-6 z-10">
    <div class="flex items-center space-x-3">
      <div class="text-primary text-2xl">
        <i class="fa fa-fire"></i>
      </div>
      <h1 class="text-xl font-bold text-primary">燃气客户管理系统</h1>
    </div>
    
    <div class="flex items-center space-x-6">
      <div class="relative">
        <input type="text" placeholder="全局搜索..." class="pl-9 pr-4 py-2 rounded-md border border-light-2 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary text-sm w-64">
        <i class="fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-dark-2"></i>
      </div>
      
      <button class="text-dark-2 hover:text-primary transition-colors relative">
        <i class="fa fa-bell-o text-xl"></i>
        <span class="absolute -top-1 -right-1 w-4 h-4 bg-danger text-white text-xs rounded-full flex items-center justify-center">2</span>
      </button>
      <button class="text-dark-2 hover:text-primary transition-colors">
        <i class="fa fa-cog text-xl"></i>
      </button>
      <div class="flex items-center space-x-2">
        <img src="https://picsum.photos/id/1005/40/40" alt="用户头像" class="w-8 h-8 rounded-full object-cover">
        <span class="font-medium">管理员</span>
      </div>
    </div>
  </header>

  <div class="flex flex-1 overflow-hidden">
    <!-- 左侧导航栏 -->
    <aside class="w-64 bg-white border-r border-light-2 flex-shrink-0 overflow-y-auto h-full">
      <nav class="py-4">
        <div class="px-4 py-2 text-xs font-semibold text-dark-2 uppercase tracking-wider">客户管理</div>
        <div class="sidebar-item active">
          <i class="fa fa-user-circle-o w-5 text-center mr-3"></i>
          <span>客户档案</span>
        </div>
        <div class="sidebar-item">
          <i class="fa fa-tachometer w-5 text-center mr-3"></i>
          <span>表具管理</span>
        </div>
        <div class="sidebar-item">
          <i class="fa fa-cogs w-5 text-center mr-3"></i>
          <span>用气设施</span>
        </div>
        <div class="sidebar-item">
          <i class="fa fa-building-o w-5 text-center mr-3"></i>
          <span>小区管理</span>
        </div>
        
        <div class="px-4 py-2 mt-6 text-xs font-semibold text-dark-2 uppercase tracking-wider">业务管理</div>
        <div class="sidebar-item">
          <i class="fa fa-file-text-o w-5 text-center mr-3"></i>
          <span>报装管理</span>
        </div>
        <div class="sidebar-item">
          <i class="fa fa-check-square-o w-5 text-center mr-3"></i>
          <span>安检记录</span>
        </div>
        <div class="sidebar-item">
          <i class="fa fa-calendar-check-o w-5 text-center mr-3"></i>
          <span>检定计划</span>
        </div>
        
        <div class="px-4 py-2 mt-6 text-xs font-semibold text-dark-2 uppercase tracking-wider">数据分析</div>
        <div class="sidebar-item">
          <i class="fa fa-bar-chart w-5 text-center mr-3"></i>
          <span>用气分析</span>
        </div>
        <div class="sidebar-item">
          <i class="fa fa-map-o w-5 text-center mr-3"></i>
          <span>区域分析</span>
        </div>
      </nav>
    </aside>
    
    <!-- 主内容区 -->
    <main class="flex-1 overflow-y-auto p-6 bg-light-1">
      <!-- 页面标题与操作 -->
      <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
        <div>
          <h2 class="text-[clamp(1.25rem,3vw,1.75rem)] font-bold text-dark">客户档案</h2>
          <p class="text-dark-2 mt-1">管理客户基础信息、表具关联及用气设施</p>
        </div>
        <div class="flex space-x-3 mt-4 md:mt-0">
          <div class="relative">
            <select class="pl-3 pr-8 py-2 rounded-md border border-light-2 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary bg-white text-sm appearance-none">
              <option>全部客户类型</option>
              <option>居民用户</option>
              <option>学校</option>
              <option>医院</option>
              <option>商业用户</option>
            </select>
            <i class="fa fa-chevron-down absolute right-3 top-1/2 transform -translate-y-1/2 text-dark-2 text-xs pointer-events-none"></i>
          </div>
          <button class="bg-white border border-light-2 hover:border-primary text-dark px-4 py-2 rounded-md transition-colors flex items-center">
            <i class="fa fa-filter mr-2"></i> 筛选
          </button>
          <button class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-md transition-colors flex items-center">
            <i class="fa fa-plus mr-2"></i> 新增客户
          </button>
        </div>
      </div>
      
      <!-- 客户详情卡片 -->
      <div class="bg-white rounded-lg card-shadow p-6 mb-6">
        <div class="flex flex-col md:flex-row md:items-start md:justify-between">
          <div class="flex items-start">
            <div class="w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center text-primary text-2xl mr-4">
              <i class="fa fa-user"></i>
            </div>
            <div>
              <div class="flex items-center">
                <h3 class="text-xl font-bold mr-3">张三</h3>
                <span class="bg-light-1 text-dark-2 text-xs px-2 py-1 rounded-full">居民用户</span>
              </div>
              <p class="text-dark-2 mt-1">客户编号: C-20230615001</p>
              <div class="flex space-x-4 mt-3">
                <div class="flex items-center text-sm">
                  <i class="fa fa-phone text-primary mr-2"></i>
                  <span>138****5678</span>
                </div>
                <div class="flex items-center text-sm">
                  <i class="fa fa-calendar text-primary mr-2"></i>
                  <span>开户日期: 2023-06-15</span>
                </div>
              </div>
            </div>
          </div>
          
          <div class="flex space-x-3 mt-4 md:mt-0">
            <button class="bg-light-1 hover:bg-light-2 text-dark px-4 py-2 rounded-md transition-colors flex items-center">
              <i class="fa fa-print mr-2"></i> 打印档案
            </button>
            <button class="bg-secondary hover:bg-secondary/90 text-white px-4 py-2 rounded-md transition-colors flex items-center">
              <i class="fa fa-edit mr-2"></i> 编辑
            </button>
            <button class="bg-danger hover:bg-danger/90 text-white px-4 py-2 rounded-md transition-colors flex items-center">
              <i class="fa fa-trash mr-2"></i> 删除
            </button>
          </div>
        </div>
      </div>
      
      <!-- 客户信息标签页 -->
      <div class="border-b border-light-2 mb-6">
        <ul class="flex flex-wrap -mb-px" id="customerTabs" role="tablist">
          <li class="mr-2" role="presentation">
            <button class="inline-block p-4 border-b-2 border-primary text-primary font-medium" id="basic-info-tab" data-tabs-target="#basic-info" type="button" role="tab" aria-selected="true">
              基础信息
            </button>
          </li>
          <li class="mr-2" role="presentation">
            <button class="inline-block p-4 border-b-2 border-transparent text-dark-2 hover:text-primary hover:border-primary/30 font-medium" id="meter-info-tab" data-tabs-target="#meter-info" type="button" role="tab" aria-selected="false">
              表具信息
            </button>
          </li>
          <li class="mr-2" role="presentation">
            <button class="inline-block p-4 border-b-2 border-transparent text-dark-2 hover:text-primary hover:border-primary/30 font-medium" id="facility-info-tab" data-tabs-target="#facility-info" type="button" role="tab" aria-selected="false">
              用气设施
            </button>
          </li>
          <li role="presentation">
            <button class="inline-block p-4 border-b-2 border-transparent text-dark-2 hover:text-primary hover:border-primary/30 font-medium" id="inspection-tab" data-tabs-target="#inspection" type="button" role="tab" aria-selected="false">
              安检记录
            </button>
          </li>
        </ul>
      </div>
      
      <!-- 基础信息面板 -->
      <div id="basic-info" class="bg-white rounded-lg card-shadow p-6 mb-6">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <div>
            <h4 class="text-sm font-medium text-dark-2 mb-3">个人信息</h4>
            <ul class="space-y-3">
              <li class="flex">
                <span class="text-dark-2 w-24">客户名称:</span>
                <span class="font-medium">张三</span>
              </li>
              <li class="flex">
                <span class="text-dark-2 w-24">联系电话:</span>
                <span>138****5678</span>
              </li>
              <li class="flex">
                <span class="text-dark-2 w-24">证件类型:</span>
                <span>居民身份证</span>
              </li>
              <li class="flex">
                <span class="text-dark-2 w-24">证件号码:</span>
                <span>11010********5678</span>
              </li>
              <li class="flex">
                <span class="text-dark-2 w-24">客户类型:</span>
                <span>居民用户</span>
              </li>
            </ul>
          </div>
          
          <div>
            <h4 class="text-sm font-medium text-dark-2 mb-3">地址信息</h4>
            <ul class="space-y-3">
              <li class="flex">
                <span class="text-dark-2 w-24">所属小区:</span>
                <span class="font-medium">阳光花园小区</span>
              </li>
              <li class="flex">
                <span class="text-dark-2 w-24">所属片区:</span>
                <span>城东片区</span>
              </li>
              <li class="flex">
                <span class="text-dark-2 w-24">详细地址:</span>
                <span>3号楼2单元501室</span>
              </li>
              <li class="flex">
                <span class="text-dark-2 w-24">邮政编码:</span>
                <span>100001</span>
              </li>
              <li class="flex">
                <span class="text-dark-2 w-24">GIS坐标:</span>
                <span>39.9087, 116.3975</span>
              </li>
            </ul>
          </div>
          
          <div>
            <h4 class="text-sm font-medium text-dark-2 mb-3">业务信息</h4>
            <ul class="space-y-3">
              <li class="flex">
                <span class="text-dark-2 w-24">开户日期:</span>
                <span>2023-06-15</span>
              </li>
              <li class="flex">
                <span class="text-dark-2 w-24">报装日期:</span>
                <span>2023-06-10</span>
              </li>
              <li class="flex">
                <span class="text-dark-2 w-24">通气日期:</span>
                <span>2023-06-20</span>
              </li>
              <li class="flex">
                <span class="text-dark-2 w-24">供气状态:</span>
                <span class="text-success font-medium">正常供气</span>
              </li>
              <li class="flex">
                <span class="text-dark-2 w-24">结算方式:</span>
                <span>IC卡预付费</span>
              </li>
              <li class="flex">
                <span class="text-dark-2 w-24">用气性质:</span>
                <span>民用</span>
              </li>
            </ul>
          </div>
        </div>
      </div>
      
      <!-- 表具信息面板 -->
      <div id="meter-info" class="hidden bg-white rounded-lg card-shadow p-6 mb-6">
        <div class="flex justify-between items-center mb-6">
          <h4 class="font-medium">关联表具列表</h4>
          <button class="text-primary hover:text-primary/80 text-sm flex items-center transition-colors">
            <i class="fa fa-plus-circle mr-1"></i> 关联新表具
          </button>
        </div>
        
        <div class="overflow-x-auto">
          <table class="min-w-full divide-y divide-light-2">
            <thead>
              <tr>
                <th class="px-4 py-3 bg-light-1 text-left text-xs font-medium text-dark-2 uppercase tracking-wider">表具编号</th>
                <th class="px-4 py-3 bg-light-1 text-left text-xs font-medium text-dark-2 uppercase tracking-wider">品牌型号</th>
                <th class="px-4 py-3 bg-light-1 text-left text-xs font-medium text-dark-2 uppercase tracking-wider">规格</th>
                <th class="px-4 py-3 bg-light-1 text-left text-xs font-medium text-dark-2 uppercase tracking-wider">安装位置</th>
                <th class="px-4 py-3 bg-light-1 text-left text-xs font-medium text-dark-2 uppercase tracking-wider">安装日期</th>
                <th class="px-4 py-3 bg-light-1 text-left text-xs font-medium text-dark-2 uppercase tracking-wider">下次检定</th>
                <th class="px-4 py-3 bg-light-1 text-left text-xs font-medium text-dark-2 uppercase tracking-wider">状态</th>
                <th class="px-4 py-3 bg-light-1 text-right text-xs font-medium text-dark-2 uppercase tracking-wider">操作</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-light-2">
              <tr class="table-row-hover">
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm font-medium">M-20230620001</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm">华帝 JSG20-10P1</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm">G1.6</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm">厨房吊柜内</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm">2023-06-20</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm">2028-06-19</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <span class="px-2 py-1 text-xs rounded-full bg-success/10 text-success">正常使用</span>
                </td>
                <td class="px-4 py-3 whitespace-nowrap text-right text-sm">
                  <button class="btn-action"><i class="fa fa-eye"></i></button>
                  <button class="btn-action"><i class="fa fa-edit"></i></button>
                  <button class="btn-action"><i class="fa fa-exchange"></i></button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div class="mt-6 p-4 bg-light-1 rounded-lg">
          <h5 class="font-medium text-sm mb-3">表具更换记录</h5>
          <div class="space-y-3 max-h-40 overflow-y-auto scrollbar-thin">
            <div class="text-sm">
              <div class="flex justify-between">
                <span class="font-medium">2023-06-20</span>
                <span class="text-primary">安装新表</span>
              </div>
              <p class="text-dark-2 mt-1">表具编号: M-20230620001，操作人员: 李师傅</p>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 用气设施面板 -->
      <div id="facility-info" class="hidden bg-white rounded-lg card-shadow p-6 mb-6">
        <div class="flex justify-between items-center mb-6">
          <h4 class="font-medium">用气设备列表</h4>
          <button class="text-primary hover:text-primary/80 text-sm flex items-center transition-colors">
            <i class="fa fa-plus-circle mr-1"></i> 添加用气设备
          </button>
        </div>
        
        <div class="overflow-x-auto">
          <table class="min-w-full divide-y divide-light-2">
            <thead>
              <tr>
                <th class="px-4 py-3 bg-light-1 text-left text-xs font-medium text-dark-2 uppercase tracking-wider">设备名称</th>
                <th class="px-4 py-3 bg-light-1 text-left text-xs font-medium text-dark-2 uppercase tracking-wider">类型</th>
                <th class="px-4 py-3 bg-light-1 text-left text-xs font-medium text-dark-2 uppercase tracking-wider">品牌型号</th>
                <th class="px-4 py-3 bg-light-1 text-left text-xs font-medium text-dark-2 uppercase tracking-wider">购置日期</th>
                <th class="px-4 py-3 bg-light-1 text-left text-xs font-medium text-dark-2 uppercase tracking-wider">安装位置</th>
                <th class="px-4 py-3 bg-light-1 text-left text-xs font-medium text-dark-2 uppercase tracking-wider">状态</th>
                <th class="px-4 py-3 bg-light-1 text-right text-xs font-medium text-dark-2 uppercase tracking-wider">操作</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-light-2">
              <tr class="table-row-hover">
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm font-medium">燃气灶</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm">家用双眼灶</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm">方太 JZT-HT8BE.S</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm">2022-05-10</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm">厨房灶台</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <span class="px-2 py-1 text-xs rounded-full bg-success/10 text-success">正常使用</span>
                </td>
                <td class="px-4 py-3 whitespace-nowrap text-right text-sm">
                  <button class="btn-action"><i class="fa fa-eye"></i></button>
                  <button class="btn-action"><i class="fa fa-edit"></i></button>
                  <button class="btn-action"><i class="fa fa-trash"></i></button>
                </td>
              </tr>
              <tr class="table-row-hover">
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm font-medium">燃气热水器</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm">家用强排式</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm">海尔 JSQ30-16JR5(12T)</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm">2021-09-15</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm">卫生间</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <span class="px-2 py-1 text-xs rounded-full bg-success/10 text-success">正常使用</span>
                </td>
                <td class="px-4 py-3 whitespace-nowrap text-right text-sm">
                  <button class="btn-action"><i class="fa fa-eye"></i></button>
                  <button class="btn-action"><i class="fa fa-edit"></i></button>
                  <button class="btn-action"><i class="fa fa-trash"></i></button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- 安检记录面板 -->
      <div id="inspection" class="hidden bg-white rounded-lg card-shadow p-6 mb-6">
        <div class="flex justify-between items-center mb-6">
          <h4 class="font-medium">安检记录列表</h4>
          <button class="text-primary hover:text-primary/80 text-sm flex items-center transition-colors">
            <i class="fa fa-plus-circle mr-1"></i> 新增安检记录
          </button>
        </div>
        
        <div class="overflow-x-auto">
          <table class="min-w-full divide-y divide-light-2">
            <thead>
              <tr>
                <th class="px-4 py-3 bg-light-1 text-left text-xs font-medium text-dark-2 uppercase tracking-wider">安检日期</th>
                <th class="px-4 py-3 bg-light-1 text-left text-xs font-medium text-dark-2 uppercase tracking-wider">安检类型</th>
                <th class="px-4 py-3 bg-light-1 text-left text-xs font-medium text-dark-2 uppercase tracking-wider">检查结果</th>
                <th class="px-4 py-3 bg-light-1 text-left text-xs font-medium text-dark-2 uppercase tracking-wider">整改项</th>
                <th class="px-4 py-3 bg-light-1 text-left text-xs font-medium text-dark-2 uppercase tracking-wider">整改状态</th>
                <th class="px-4 py-3 bg-light-1 text-left text-xs font-medium text-dark-2 uppercase tracking-wider">安检人员</th>
                <th class="px-4 py-3 bg-light-1 text-right text-xs font-medium text-dark-2 uppercase tracking-wider">操作</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-light-2">
              <tr class="table-row-hover">
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm font-medium">2023-12-10</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm">年度例行安检</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <span class="px-2 py-1 text-xs rounded-full bg-warning/10 text-warning">需整改</span>
                </td>
                <td class="px-4 py-3">
                  <div class="text-sm">燃气软管老化，建议更换</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <span class="px-2 py-1 text-xs rounded-full bg-success/10 text-success">已完成</span>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm">王师傅</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap text-right text-sm">
                  <button class="btn-action"><i class="fa fa-eye"></i></button>
                  <button class="btn-action"><i class="fa fa-edit"></i></button>
                </td>
              </tr>
              <tr class="table-row-hover">
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm font-medium">2023-06-20</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm">通气验收</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <span class="px-2 py-1 text-xs rounded-full bg-success/10 text-success">合格</span>
                </td>
                <td class="px-4 py-3">
                  <div class="text-sm">无</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm">-</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap">
                  <div class="text-sm">李师傅</div>
                </td>
                <td class="px-4 py-3 whitespace-nowrap text-right text-sm">
                  <button class="btn-action"><i class="fa fa-eye"></i></button>
                  <button class="btn-action"><i class="fa fa-edit"></i></button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div class="mt-6">
          <h4 class="font-medium mb-3">下次安检计划</h4>
          <div class="bg-light-1 p-4 rounded-lg">
            <div class="flex items-center justify-between">
              <div>
                <p class="font-medium">2024年度例行安检</p>
                <p class="text-sm text-dark-2 mt-1">计划日期: 2024-12-01 至 2024-12-15</p>
              </div>
              <button class="bg-primary/10 hover:bg-primary/20 text-primary px-3 py-1 rounded-md text-sm transition-colors">
                预约安检
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 小区信息与地图 -->
      <div class="bg-white rounded-lg card-shadow p-6 mb-6">
        <h3 class="text-lg font-semibold mb-4">所属小区信息</h3>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
          <div class="lg:col-span-1">
            <ul class="space-y-3">
              <li class="flex">
                <span class="text-dark-2 w-24">小区名称:</span>
                <span class="font-medium">阳光花园小区</span>
              </li>
              <li class="flex">
                <span class="text-dark-2 w-24">小区地址:</span>
                <span>朝阳区建国路88号</span>
              </li>
              <li class="flex">
                <span class="text-dark-2 w-24">所属片区:</span>
                <span>城东片区</span>
              </li>
              <li class="flex">
                <span class="text-dark-2 w-24">总户数:</span>
                <span>1256户</span>
              </li>
              <li class="flex">
                <span class="text-dark-2 w-24">入住率:</span>
                <span>92%</span>
              </li>
              <li class="flex">
                <span class="text-dark-2 w-24">通气率:</span>
                <span>89%</span>
              </li>
              <li class="flex">
                <span class="text-dark-2 w-24">物业联系人:</span>
                <span>张经理 (139****1234)</span>
              </li>
            </ul>
            
            <button class="mt-4 text-primary hover:text-primary/80 text-sm flex items-center transition-colors">
              <i class="fa fa-external-link mr-1"></i> 查看小区详情
            </button>
          </div>
          
          <div class="lg:col-span-2 h-64">
            <div id="communityMap" class="w-full h-full rounded-lg"></div>
          </div>
        </div>
      </div>
      
      <!-- 用气统计 -->
      <div class="bg-white rounded-lg card-shadow p-6">
        <h3 class="text-lg font-semibold mb-4">用气统计分析</h3>
        <div class="h-64">
          <canvas id="gasUsageChart"></canvas>
        </div>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6">
          <div class="bg-light-1 p-3 rounded-lg">
            <p class="text-dark-2 text-sm">本月用气量</p>
            <p class="text-xl font-bold mt-1">18.5 m³</p>
            <p class="text-success text-xs mt-1 flex items-center">
              <i class="fa fa-arrow-up mr-1"></i> 较上月增长 2.3%
            </p>
          </div>
          <div class="bg-light-1 p-3 rounded-lg">
            <p class="text-dark-2 text-sm">本年度累计</p>
            <p class="text-xl font-bold mt-1">216.3 m³</p>
            <p class="text-success text-xs mt-1 flex items-center">
              <i class="fa fa-arrow-up mr-1"></i> 较去年增长 5.7%
            </p>
          </div>
          <div class="bg-light-1 p-3 rounded-lg">
            <p class="text-dark-2 text-sm">平均日用气</p>
            <p class="text-xl font-bold mt-1">0.6 m³</p>
            <p class="text-dark-2 text-xs mt-1">-</p>
          </div>
          <div class="bg-light-1 p-3 rounded-lg">
            <p class="text-dark-2 text-sm">缴费状态</p>
            <p class="text-xl font-bold mt-1">已缴费</p>
            <p class="text-dark-2 text-xs mt-1">下次缴费日期: 2024-07-10</p>
          </div>
        </div>
      </div>
    </main>
  </div>
  
  <!-- 模态框 - 新增/编辑客户 -->
  <div id="customerModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto">
      <div class="p-6 border-b border-light-2">
        <div class="flex justify-between items-center">
          <h3 class="text-lg font-bold">新增客户</h3>
          <button id="closeCustomerModal" class="text-dark-2 hover:text-danger">
            <i class="fa fa-times"></i>
          </button>
        </div>
      </div>
      <div class="p-6">
        <!-- 表单内容将在这里显示 -->
        <p class="text-center py-10 text-dark-2">客户表单内容（实际项目中会有完整的表单字段）</p>
      </div>
      <div class="p-6 border-t border-light-2 flex justify-end space-x-3">
        <button class="bg-light-1 hover:bg-light-2 text-dark px-4 py-2 rounded-md transition-colors">
          取消
        </button>
        <button class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-md transition-colors">
          保存
        </button>
      </div>
    </div>
  </div>

  <script>
    // 初始化小区地图
    const communityMap = L.map('communityMap').setView([39.9087, 116.3975], 15);
    
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(communityMap);
    
    // 添加小区标记
    L.marker([39.9087, 116.3975]).addTo(communityMap)
      .bindPopup('<b>阳光花园小区</b><br>总户数: 1256户')
      .openPopup();
    
    // 添加客户具体位置标记
    L.circleMarker([39.9092, 116.3968], {
      radius: 6,
      fillColor: '#165DFF',
      fillOpacity: 0.8,
      color: '#165DFF',
      weight: 2
    }).addTo(communityMap)
      .bindTooltip('客户位置: 3号楼2单元501室');
    
    // 限制地图拖动范围
    const southWest = L.latLng(39.90, 116.38);
    const northEast = L.latLng(39.92, 116.41);
    const bounds = L.latLngBounds(southWest, northEast);
    communityMap.setMaxBounds(bounds);
    communityMap.on('drag', function() {
      communityMap.panInsideBounds(bounds, { animate: false });
    });
    
    // 初始化用气统计图表
    const ctx = document.getElementById('gasUsageChart').getContext('2d');
    const gasUsageChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],
        datasets: [{
          label: '用气量 (m³)',
          data: [15.2, 14.8, 12.5, 10.3, 8.7, 9.2, 16.8, 18.5, 14.2, 13.1, 16.5, 18.5],
          backgroundColor: '#165DFF',
          borderRadius: 4
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          y: {
            beginAtZero: true,
            grid: {
              color: 'rgba(0, 0, 0, 0.05)'
            }
          },
          x: {
            grid: {
              display: false
            }
          }
        },
        plugins: {
          legend: {
            display: false
          }
        }
      }
    });
    
    // 标签页切换功能
    document.querySelectorAll('#customerTabs button').forEach(button => {
      button.addEventListener('click', () => {
        // 移除所有标签页的活跃状态
        document.querySelectorAll('#customerTabs button').forEach(btn => {
          btn.classList.remove('border-primary', 'text-primary');
          btn.classList.add('border-transparent', 'text-dark-2', 'hover:text-primary', 'hover:border-primary/30');
          btn.setAttribute('aria-selected', 'false');
        });
        
        // 设置当前标签页为活跃状态
        button.classList.remove('border-transparent', 'text-dark-2', 'hover:text-primary', 'hover:border-primary/30');
        button.classList.add('border-primary', 'text-primary');
        button.setAttribute('aria-selected', 'true');
        
        // 隐藏所有内容面板
        document.querySelectorAll('[id$="-info"], #inspection').forEach(panel => {
          panel.classList.add('hidden');
        });
        
        // 显示当前标签页对应的内容面板
        const target = button.getAttribute('data-tabs-target');
        document.querySelector(target).classList.remove('hidden');
      });
    });
    
    // 模态框控制
    document.querySelector('button:has(.fa-plus)').addEventListener('click', () => {
      document.getElementById('customerModal').classList.remove('hidden');
    });
    
    document.getElementById('closeCustomerModal').addEventListener('click', () => {
      document.getElementById('customerModal').classList.add('hidden');
    });
    
    // 点击模态框外部关闭
    document.getElementById('customerModal').addEventListener('click', (e) => {
      if (e.target === document.getElementById('customerModal')) {
        document.getElementById('customerModal').classList.add('hidden');
      }
    });
  </script>
</body>
</html>
